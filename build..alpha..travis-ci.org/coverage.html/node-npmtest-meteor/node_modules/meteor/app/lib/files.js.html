<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-meteor/node_modules/meteor/app/lib/files.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-meteor">npmtest-meteor (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-meteor/node_modules/meteor/app/lib/files.js</span></h1>
    <h2>
        
        Statements: <span class="metric">13.73% <small>(21 / 153)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">9.38% <small>(9 / 96)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">20% <small>(6 / 30)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">14.58% <small>(21 / 144)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-meteor/node_modules/meteor/app/lib/</a> &#187; files.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352</td><td class="line-coverage"><span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">24</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8</span>
<span class="cline-any cline-yes">8</span>
<span class="cline-any cline-yes">48</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">48</span>
<span class="cline-any cline-yes">48</span>
<span class="cline-any cline-yes">8</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">40</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">8</span>
<span class="cline-any cline-yes">8</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">2</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">var fs = require("fs");
var path = require('path');
var _ = require(path.join(__dirname, 'third', 'underscore.js'));
&nbsp;
var files = module.exports = {
  // A sort comparator to order files into load order.
  sort: <span class="fstat-no" title="function not covered" >function (a, b) {</span>
    // main.* loaded last
<span class="cstat-no" title="statement not covered" >    var ismain_a = (path.basename(a).indexOf('main.') === 0);</span>
<span class="cstat-no" title="statement not covered" >    var ismain_b = (path.basename(b).indexOf('main.') === 0);</span>
<span class="cstat-no" title="statement not covered" >    if (ismain_a !== ismain_b) {</span>
<span class="cstat-no" title="statement not covered" >      return (ismain_a ? 1 : -1);</span>
    }
&nbsp;
    // /lib/ loaded first
<span class="cstat-no" title="statement not covered" >    var islib_a = (a.indexOf(path.sep + 'lib' + path.sep) !== -1);</span>
<span class="cstat-no" title="statement not covered" >    var islib_b = (b.indexOf(path.sep + 'lib' + path.sep) !== -1);</span>
<span class="cstat-no" title="statement not covered" >    if (islib_a !== islib_b) {</span>
<span class="cstat-no" title="statement not covered" >      return (islib_a ? -1 : 1);</span>
    }
&nbsp;
    // deeper paths loaded first.
<span class="cstat-no" title="statement not covered" >    var len_a = a.split(path.sep).length;</span>
<span class="cstat-no" title="statement not covered" >    var len_b = b.split(path.sep).length;</span>
<span class="cstat-no" title="statement not covered" >    if (len_a !== len_b) {</span>
<span class="cstat-no" title="statement not covered" >      return (len_a &lt; len_b ? 1 : -1);</span>
    }
&nbsp;
    // otherwise alphabetical
<span class="cstat-no" title="statement not covered" >    return (a &lt; b ? -1 : 1);</span>
  },
&nbsp;
  // Returns true if this is a file we should maybe care about (stat it,
  // descend if it is a directory, etc).
  pre_filter: <span class="fstat-no" title="function not covered" >function (filename) {</span>
<span class="cstat-no" title="statement not covered" >    if (!filename) { <span class="cstat-no" title="statement not covered" >return false; </span>}</span>
    // no . files
<span class="cstat-no" title="statement not covered" >    var base = path.basename(filename);</span>
<span class="cstat-no" title="statement not covered" >    if (base &amp;&amp; base[0] === '.') { <span class="cstat-no" title="statement not covered" >return false; </span>}</span>
&nbsp;
    // XXX
    // first, we only want to exclude APP_ROOT/public, not some deeper public
    // second, we don't really like this at all
    // third, we don't update the app now if anything here changes
<span class="cstat-no" title="statement not covered" >    if (base === 'public') { <span class="cstat-no" title="statement not covered" >return false; </span>}</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return true;</span>
  },
&nbsp;
  // Returns true if this is a file we should monitor.
  // Iterate over all the interesting files, applying 'func' to each
  // file path. 'extensions' is an array of extensions to include (eg
  // ['.html', '.js'])
  file_list_async: <span class="fstat-no" title="function not covered" >function (filepath, extensions, func) {</span>
<span class="cstat-no" title="statement not covered" >    if (!files.pre_filter(filepath)) { <span class="cstat-no" title="statement not covered" >return; </span>}</span>
<span class="cstat-no" title="statement not covered" >    fs.stat(filepath, <span class="fstat-no" title="function not covered" >function(err, stats) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (err) {</span>
        // XXX!
<span class="cstat-no" title="statement not covered" >        return;</span>
      }
&nbsp;
<span class="cstat-no" title="statement not covered" >      if (stats.isDirectory()) {</span>
<span class="cstat-no" title="statement not covered" >        fs.readdir(filepath, <span class="fstat-no" title="function not covered" >function(err, fileNames) {</span></span>
<span class="cstat-no" title="statement not covered" >          if(err) {</span>
            // XXX!
<span class="cstat-no" title="statement not covered" >            return;</span>
          }
&nbsp;
<span class="cstat-no" title="statement not covered" >          _.each(fileNames, <span class="fstat-no" title="function not covered" >function (fileName) {</span></span>
<span class="cstat-no" title="statement not covered" >            files.file_list_async(path.join(filepath, fileName),</span>
                                  extensions, func);
          });
        });
      } else <span class="cstat-no" title="statement not covered" >if (_.indexOf(extensions, path.extname(filepath)) !== -1) {</span>
<span class="cstat-no" title="statement not covered" >        func(filepath);</span>
      }
    });
  },
&nbsp;
  file_list_sync: <span class="fstat-no" title="function not covered" >function (filepath, extensions) {</span>
<span class="cstat-no" title="statement not covered" >    var ret = [];</span>
<span class="cstat-no" title="statement not covered" >    if (!files.pre_filter(filepath)) { <span class="cstat-no" title="statement not covered" >return ret; </span>}</span>
<span class="cstat-no" title="statement not covered" >    var stats = fs.statSync(filepath);</span>
<span class="cstat-no" title="statement not covered" >    if (stats.isDirectory()) {</span>
<span class="cstat-no" title="statement not covered" >      var fileNames = fs.readdirSync(filepath);</span>
<span class="cstat-no" title="statement not covered" >      _.each(fileNames, <span class="fstat-no" title="function not covered" >function (fileName) {</span></span>
<span class="cstat-no" title="statement not covered" >        ret = ret.concat(files.file_list_sync(</span>
          path.join(filepath, fileName), extensions));
      });
    } else <span class="cstat-no" title="statement not covered" >if (_.indexOf(extensions, path.extname(filepath)) !== -1) {</span>
<span class="cstat-no" title="statement not covered" >      ret.push(filepath);</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return ret;</span>
  },
&nbsp;
&nbsp;
  // given a path, returns true if it is a meteor application (has a
  // .meteor directory with a 'packages' file). false otherwise.
  is_app_dir: function (filepath) {
    return fs.existsSync(path.join(filepath, '.meteor', 'packages'));
  },
&nbsp;
  // given a path, returns true if it is a meteor package (is a
  // directory with a 'packages.js' file). false otherwise.
  //
  // Note that a directory can be both a package _and_ an application.
  is_package_dir: function (filepath) {
    return fs.existsSync(path.join(filepath, 'package.js'));
  },
&nbsp;
  // given a path, return true if this is a collection of packages.
  // This is used to run all the tests in meteor.
  is_package_collection_dir: function (filepath) {
    // XXX implementation is kinda specific to our code base, but this
    // is better than confusing the hell out of someone who names their
    // project 'packages'
    return path.basename(filepath) === 'packages' &amp;&amp;
<span class="branch-1 cbranch-no" title="branch not covered" >      fs.existsSync(path.join(filepath, 'meteor', 'package.js'));</span>
  },
&nbsp;
  // given a predicate function and a starting path, traverse upwards
  // from the path until we find a path that satisfys the predicate.
  //
  // returns either the path to the lowest level directory that passed
  // the test or null for none found. if starting path isn't given, use
  // cwd.
  find_upwards: function (predicate, start_path) {
    var test_dir = start_path || process.cwd();
    while (test_dir) {
      <span class="missing-if-branch" title="if path not taken" >I</span>if (predicate(test_dir)) {
<span class="cstat-no" title="statement not covered" >        break;</span>
      }
      var new_dir = path.dirname(test_dir);
      if (new_dir === test_dir) {
        test_dir = null;
      } else {
        test_dir = new_dir;
      }
    }
    <span class="missing-if-branch" title="else path not taken" >E</span>if (!test_dir)
      return null;
&nbsp;
<span class="cstat-no" title="statement not covered" >    return test_dir;</span>
  },
&nbsp;
  // compatibility shim. delete when unused.
  find_app_dir: <span class="fstat-no" title="function not covered" >function (filepath) {</span>
<span class="cstat-no" title="statement not covered" >    return files.find_upwards(files.is_app_dir, filepath);</span>
  },
&nbsp;
  // create a .gitignore file in dir_path if one doesn't exist. add
  // 'entry' to the .gitignore on its own line at the bottom of the
  // file, if the exact line does not already exist in the file.
  add_to_gitignore: <span class="fstat-no" title="function not covered" >function (dir_path, entry) {</span>
<span class="cstat-no" title="statement not covered" >    var filepath = path.join(dir_path, ".gitignore");</span>
<span class="cstat-no" title="statement not covered" >    if (fs.existsSync(filepath)) {</span>
<span class="cstat-no" title="statement not covered" >      var data = fs.readFileSync(filepath, 'utf8');</span>
<span class="cstat-no" title="statement not covered" >      var lines = data.split(/\n/);</span>
<span class="cstat-no" title="statement not covered" >      if (_.any(lines, <span class="fstat-no" title="function not covered" >function (x) {</span> <span class="cstat-no" title="statement not covered" >return x === entry; </span>})) {</span>
        // already there do nothing
      } else {
        // rewrite file w/ new entry.
<span class="cstat-no" title="statement not covered" >        if (data.substr(-1) !== "\n") <span class="cstat-no" title="statement not covered" >data = data + "\n";</span></span>
<span class="cstat-no" title="statement not covered" >        data = data + entry + "\n";</span>
<span class="cstat-no" title="statement not covered" >        fs.writeFileSync(filepath, data, 'utf8');</span>
      }
    } else {
      // doesn't exist, just write it.
<span class="cstat-no" title="statement not covered" >      fs.writeFileSync(filepath, entry + "\n", 'utf8');</span>
    }
  },
&nbsp;
  // True if we're in a git checkout of Meteor, else false (we're in
  // an installation.)
  in_checkout: function () {
    try {
      <span class="missing-if-branch" title="if path not taken" >I</span>if (fs.existsSync(path.join(__dirname, '..', '..', '.git')))
<span class="cstat-no" title="statement not covered" >        return true;</span>
    } catch (e) { <span class="cstat-no" title="statement not covered" >console.log(e);}</span>
&nbsp;
    return false;
  },
&nbsp;
  // Return the root of dev_bundle (probably /usr/local/meteor in an
  // install, or (checkout root)/dev_bundle in a checkout..)
  get_dev_bundle: function () {
    <span class="missing-if-branch" title="if path not taken" >I</span>if (files.in_checkout()) {
<span class="cstat-no" title="statement not covered" >      return path.join(__dirname, '..', '..', 'dev_bundle');</span>
    }
    else
      return path.join(__dirname, '..', '..');
  },
  
  // returns a list of places where packages can be found.
  // 1. directories set via process.env.PACKAGES_DIRS
  // 2. default is packages/ in the meteor directory
  // XXX: 3. a per project directory? (vendor/packages in rails parlance?)
  get_package_dirs: <span class="fstat-no" title="function not covered" >function() {</span>
<span class="cstat-no" title="statement not covered" >    var package_dirs = [path.join(__dirname, '..', '..', 'packages')];</span>
<span class="cstat-no" title="statement not covered" >    if (process.env.PACKAGE_DIRS)</span>
<span class="cstat-no" title="statement not covered" >      package_dirs = process.env.PACKAGE_DIRS.split(':').concat(package_dirs);</span>
    
<span class="cstat-no" title="statement not covered" >    return package_dirs;</span>
  },
  
  // search package dirs for a package named name. 
  // undefined if the package isn't in any dir
  get_package_dir: <span class="fstat-no" title="function not covered" >function (name) {</span>
<span class="cstat-no" title="statement not covered" >    var ret;</span>
<span class="cstat-no" title="statement not covered" >    _.find(this.get_package_dirs(), <span class="fstat-no" title="function not covered" >function(package_dir) {</span></span>
<span class="cstat-no" title="statement not covered" >      var dir = path.join(package_dir, name);</span>
<span class="cstat-no" title="statement not covered" >      if (fs.existsSync(path.join(dir, 'package.js'))) {</span>
<span class="cstat-no" title="statement not covered" >        ret = dir;</span>
<span class="cstat-no" title="statement not covered" >        return true;</span>
      }
    });
    
<span class="cstat-no" title="statement not covered" >    return ret;</span>
  },
&nbsp;
  // Return the directory that contains the core tool (the top-level
  // 'app' directory)
  get_core_dir: <span class="fstat-no" title="function not covered" >function () {</span>
<span class="cstat-no" title="statement not covered" >    return path.join(__dirname, '..', '..', 'app');</span>
  },
&nbsp;
  // Try to find the prettiest way to present a path to the
  // user. Presently, the main thing it does is replace $HOME with ~.
  pretty_path: <span class="fstat-no" title="function not covered" >function (path) {</span>
<span class="cstat-no" title="statement not covered" >    path = fs.realpathSync(path);</span>
<span class="cstat-no" title="statement not covered" >    var home = process.env.HOME;</span>
<span class="cstat-no" title="statement not covered" >    if (home &amp;&amp; path.substr(0, home.length) === home)</span>
<span class="cstat-no" title="statement not covered" >      path = "~" + path.substr(home.length);</span>
<span class="cstat-no" title="statement not covered" >    return path;</span>
  },
&nbsp;
  // Like rm -r.
  rm_recursive: <span class="fstat-no" title="function not covered" >function (p) {</span>
<span class="cstat-no" title="statement not covered" >    try {</span>
      // the l in lstat is critical -- we want to remove symbolic
      // links, not what they point to
<span class="cstat-no" title="statement not covered" >      var stat = fs.lstatSync(p);</span>
    } catch (e) {
<span class="cstat-no" title="statement not covered" >      if (e.code == "ENOENT")</span>
<span class="cstat-no" title="statement not covered" >        return;</span>
<span class="cstat-no" title="statement not covered" >      throw e;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (stat.isDirectory()) {</span>
<span class="cstat-no" title="statement not covered" >      _.each(fs.readdirSync(p), <span class="fstat-no" title="function not covered" >function (file) {</span></span>
<span class="cstat-no" title="statement not covered" >        file = path.join(p, file);</span>
<span class="cstat-no" title="statement not covered" >        files.rm_recursive(file);</span>
      });
<span class="cstat-no" title="statement not covered" >      fs.rmdirSync(p)</span>
    } else
<span class="cstat-no" title="statement not covered" >      fs.unlinkSync(p);</span>
  },
&nbsp;
  // like mkdir -p. if it returns true, the item is a directory (even
  // if it was already created). if it returns false, the item is not
  // a directory and we couldn't make it one.
  mkdir_p: <span class="fstat-no" title="function not covered" >function (dir, mode) {</span>
<span class="cstat-no" title="statement not covered" >    var p = path.resolve(dir);</span>
<span class="cstat-no" title="statement not covered" >    var ps = path.normalize(p).split(path.sep);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    if (fs.existsSync(p)) {</span>
<span class="cstat-no" title="statement not covered" >      if (fs.statSync(p).isDirectory()) { <span class="cstat-no" title="statement not covered" >return true;}</span></span>
<span class="cstat-no" title="statement not covered" >      return false;</span>
    }
&nbsp;
    // doesn't exist. recurse to build parent.
<span class="cstat-no" title="statement not covered" >    var success = files.mkdir_p(ps.slice(0,-1).join(path.sep), mode);</span>
    // parent is not a directory.
<span class="cstat-no" title="statement not covered" >    if (!success) { <span class="cstat-no" title="statement not covered" >return false; </span>}</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    fs.mkdirSync(p, mode);</span>
&nbsp;
    // double check we exist now
<span class="cstat-no" title="statement not covered" >    if (!fs.existsSync(p) ||</span>
        !fs.statSync(p).isDirectory())
<span class="cstat-no" title="statement not covered" >      return false; </span>// wtf
<span class="cstat-no" title="statement not covered" >    return true;</span>
  },
&nbsp;
  // Roughly like cp -R. 'from' should be a directory. 'to' can either
  // be a directory, or it can not exist (in which case it will be
  // created with mkdir_p.) Doesn't think about file mode at all.
  //
  // If options.transformer_{filename, contents} is present, it should
  // be a function, and the contents (as a buffer) or filename will be
  // passed through the function. Use this to, eg, fill templates.
  //
  // If options.ignore is present, it should be a list of regexps. Any
  // file whose basename matches one of the regexps, before
  // transformation, will be skipped.
  cp_r: <span class="fstat-no" title="function not covered" >function (from, to, options) {</span>
<span class="cstat-no" title="statement not covered" >    options = options || {};</span>
<span class="cstat-no" title="statement not covered" >    files.mkdir_p(to, 0755);</span>
<span class="cstat-no" title="statement not covered" >    _.each(fs.readdirSync(from), <span class="fstat-no" title="function not covered" >function (f) {</span></span>
<span class="cstat-no" title="statement not covered" >      if (_.any(options.ignore || [], <span class="fstat-no" title="function not covered" >function (pattern) {</span></span>
<span class="cstat-no" title="statement not covered" >        return f.match(pattern);</span>
      })) <span class="cstat-no" title="statement not covered" >return;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >      var full_from = path.join(from, f);</span>
<span class="cstat-no" title="statement not covered" >      if (options.transform_filename)</span>
<span class="cstat-no" title="statement not covered" >        f = options.transform_filename(f);</span>
<span class="cstat-no" title="statement not covered" >      var full_to = path.join(to, f);</span>
<span class="cstat-no" title="statement not covered" >      if (fs.statSync(full_from).isDirectory())</span>
<span class="cstat-no" title="statement not covered" >        files.cp_r(full_from, full_to, options);</span>
      else {
<span class="cstat-no" title="statement not covered" >        if (!options.transform_contents) {</span>
          // XXX reads full file into memory.. lame.
<span class="cstat-no" title="statement not covered" >          fs.writeFileSync(full_to, fs.readFileSync(full_from))</span>
        } else {
<span class="cstat-no" title="statement not covered" >          var contents = fs.readFileSync(full_from);</span>
<span class="cstat-no" title="statement not covered" >          contents = options.transform_contents(contents, f);</span>
<span class="cstat-no" title="statement not covered" >          fs.writeFileSync(full_to, contents);</span>
        }
      }
    });
  },
&nbsp;
  // Make a temporary directory. Returns the path to the newly created
  // directory. Caller is responsible for deleting the directory later.
  mkdtemp: <span class="fstat-no" title="function not covered" >function (prefix) {</span>
<span class="cstat-no" title="statement not covered" >    prefix = prefix || 'meteor-temp-';</span>
    // find /tmp
<span class="cstat-no" title="statement not covered" >    var tmp_dir = _.first(_.map(['TMPDIR', 'TMP', 'TEMP'], <span class="fstat-no" title="function not covered" >function (t) {</span></span>
<span class="cstat-no" title="statement not covered" >      return process.env[t];</span>
    }).filter(_.identity)) || path.sep + 'tmp';
<span class="cstat-no" title="statement not covered" >    tmp_dir = fs.realpathSync(tmp_dir);</span>
&nbsp;
    // make the directory. give it 3 tries in case of collisions from
    // crappy random.
<span class="cstat-no" title="statement not covered" >    var tries = 3;</span>
<span class="cstat-no" title="statement not covered" >    while (tries &gt; 0) {</span>
<span class="cstat-no" title="statement not covered" >      var dir_path = path.join(</span>
        tmp_dir, prefix + (Math.random() * 0x100000000 + 1).toString(36));
<span class="cstat-no" title="statement not covered" >      try {</span>
<span class="cstat-no" title="statement not covered" >        fs.mkdirSync(dir_path, 0755);</span>
<span class="cstat-no" title="statement not covered" >        return dir_path;</span>
      } catch (err) {
<span class="cstat-no" title="statement not covered" >        tries--;</span>
      }
    }
<span class="cstat-no" title="statement not covered" >    throw new Error("failed to make tempory directory in " + tmp_dir);</span>
  }
&nbsp;
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Sat Apr 22 2017 18:08:07 GMT+0000 (UTC)</div>
</div>
</body>
</html>
